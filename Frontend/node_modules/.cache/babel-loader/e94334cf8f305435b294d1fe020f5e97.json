{"ast":null,"code":"import _objectSpread from\"C:/trabajo/Alehope/actividadesPreBuild/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _defineProperty from\"C:/trabajo/Alehope/actividadesPreBuild/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"C:/trabajo/Alehope/actividadesPreBuild/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectDestructuringEmpty from\"C:/trabajo/Alehope/actividadesPreBuild/Frontend/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";var _this=this;import{useState,createRef,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{useHistory}from'react-router-dom';import cx from'classnames';import{Switch,Route,Redirect}from'react-router-dom';import PerfectScrollbar from'perfect-scrollbar';import'perfect-scrollbar/css/perfect-scrollbar.css';import{makeStyles}from'@material-ui/core';import AdminNavbar from'components/Navbars/AdminNavbar';import Footer from'components/Footer/Footer';import Sidebar from'components/Sidebar/Sidebar';import routes from'routes/routes';import role from'config/roles/roles';import{refreshToken}from'redux/actions/userActions';import styles from'./styles/adminStyle';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ps;var useStyles=makeStyles(styles);var DashboardLayout=function DashboardLayout(_ref){var _cx;var rest=Object.assign({},(_objectDestructuringEmpty(_ref),_ref));var classes=useStyles();var history=useHistory();var mainPanel=/*#__PURE__*/createRef();var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),mobileOpen=_useState2[0],setMobileOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),miniActive=_useState4[0],setMiniActive=_useState4[1];var _useState5=useState(require('assets/img/logo-agencia-actividades-corto.jpg').default),_useState6=_slicedToArray(_useState5,2),logo=_useState6[0],setLogo=_useState6[1];var _useSelector=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector.userInfo;useEffect(function(){if(!userInfo){history.push('/auth/login');}},[userInfo,history]);useEffect(function(){//dispatch(refreshToken())\n},[]);var mainPanelClasses=classes.mainPanel+' '+cx((_cx={},_defineProperty(_cx,classes.mainPanelSidebarMini,miniActive),_defineProperty(_cx,classes.mainPanelWithPerfectScrollbar,navigator.platform.indexOf('Win')>-1),_cx));useEffect(function(){if(navigator.platform.indexOf('Win')>-1){ps=new PerfectScrollbar(mainPanel.current,{suppressScrollX:true,suppressScrollY:false});document.body.style.overflow='hidden';}window.addEventListener('resize',resizeFunction);// Specify how to clean up after this effect:\nreturn function cleanup(){if(navigator.platform.indexOf('Win')>-1){ps.destroy();}window.removeEventListener('resize',resizeFunction);};});var handleDrawerToggle=function handleDrawerToggle(){setMobileOpen(!mobileOpen);};var getActiveRoute=function getActiveRoute(routes){var activeRoute='Agencia de Actividades';for(var i=0;i<routes.length;i++){if(routes[i].collapse){var collapseActiveRoute=getActiveRoute(routes[i].views);if(collapseActiveRoute!==activeRoute){return collapseActiveRoute;}}else{if(window.location.href.indexOf(routes[i].layout+routes[i].path)!==-1){return routes[i].name;}}}return activeRoute;};var getRoutes=function getRoutes(routes){var filteredRoutes=getRoutesByRole(routes);return filteredRoutes.map(function(prop,key){if(prop.collapse){return getRoutes(prop.views);}if(prop.layout==='/admin'){return/*#__PURE__*/_jsx(Route,{path:prop.layout+prop.path,component:prop.component},key);}else{return null;}});};var sidebarMinimize=function sidebarMinimize(){setMiniActive(!miniActive);};var resizeFunction=function resizeFunction(){if(window.innerWidth>=960){setMobileOpen(false);}};var getRoutesByRole=function getRoutesByRole(routes){return routes;};return/*#__PURE__*/_jsxs(\"div\",{className:classes.wrapper,children:[/*#__PURE__*/_jsx(Sidebar,_objectSpread({routes:getRoutesByRole(routes),logo:logo,handleDrawerToggle:handleDrawerToggle,open:mobileOpen,color:\"white\",bgColor:\"white\",miniActive:miniActive},rest)),/*#__PURE__*/_jsxs(\"div\",{className:mainPanelClasses,ref:mainPanel,children:[/*#__PURE__*/_jsx(AdminNavbar,_objectSpread({sidebarMinimize:sidebarMinimize.bind(_this),miniActive:miniActive,brandText:getActiveRoute(routes),handleDrawerToggle:handleDrawerToggle},rest)),/*#__PURE__*/_jsx(\"div\",{className:classes.content,children:/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(Switch,{children:[getRoutes(routes),/*#__PURE__*/_jsx(Redirect,{from:\"/admin\",to:\"/admin/user-page\"})]})})}),/*#__PURE__*/_jsx(Footer,{fluid:true})]})]});};export default DashboardLayout;","map":{"version":3,"names":["useState","createRef","useEffect","useSelector","useDispatch","useHistory","cx","Switch","Route","Redirect","PerfectScrollbar","makeStyles","AdminNavbar","Footer","Sidebar","routes","role","refreshToken","styles","jsx","_jsx","jsxs","_jsxs","ps","useStyles","DashboardLayout","_ref","_cx","rest","Object","assign","_objectDestructuringEmpty","classes","history","mainPanel","dispatch","_useState","_useState2","_slicedToArray","mobileOpen","setMobileOpen","_useState3","_useState4","miniActive","setMiniActive","_useState5","require","default","_useState6","logo","setLogo","_useSelector","state","userLogin","userInfo","push","mainPanelClasses","_defineProperty","mainPanelSidebarMini","mainPanelWithPerfectScrollbar","navigator","platform","indexOf","current","suppressScrollX","suppressScrollY","document","body","style","overflow","window","addEventListener","resizeFunction","cleanup","destroy","removeEventListener","handleDrawerToggle","getActiveRoute","activeRoute","i","length","collapse","collapseActiveRoute","views","location","href","layout","path","name","getRoutes","filteredRoutes","getRoutesByRole","map","prop","key","component","sidebarMinimize","innerWidth","className","wrapper","children","_objectSpread","open","color","bgColor","ref","bind","_this","brandText","content","container","from","to","fluid"],"sources":["C:/trabajo/Alehope/actividadesPreBuild/Frontend/src/layouts/Admin/Admin.js"],"sourcesContent":["import { useState, createRef, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport cx from 'classnames'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\nimport PerfectScrollbar from 'perfect-scrollbar'\r\nimport 'perfect-scrollbar/css/perfect-scrollbar.css'\r\nimport { makeStyles } from '@material-ui/core'\r\nimport AdminNavbar from 'components/Navbars/AdminNavbar'\r\nimport Footer from 'components/Footer/Footer'\r\nimport Sidebar from 'components/Sidebar/Sidebar'\r\nimport routes from 'routes/routes'\r\nimport role from 'config/roles/roles'\r\nimport { refreshToken } from 'redux/actions/userActions'\r\nimport styles from './styles/adminStyle'\r\n\r\nvar ps\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst DashboardLayout = ({ ...rest }) => {\r\n  const classes = useStyles()\r\n  const history = useHistory()\r\n  const mainPanel = createRef()\r\n  const dispatch = useDispatch()\r\n\r\n  const [mobileOpen, setMobileOpen] = useState(false)\r\n  const [miniActive, setMiniActive] = useState(false)\r\n  const [logo, setLogo] = useState(require('assets/img/logo-agencia-actividades-corto.jpg').default)\r\n\r\n  const { userInfo } = useSelector((state) => state.userLogin)\r\n\r\n  useEffect(() => {\r\n    if (!userInfo) {\r\n      history.push('/auth/login')\r\n    }\r\n  }, [userInfo, history])\r\n\r\n  useEffect(() => {\r\n    //dispatch(refreshToken())\r\n  }, [])\r\n\r\n  const mainPanelClasses =\r\n    classes.mainPanel +\r\n    ' ' +\r\n    cx({\r\n      [classes.mainPanelSidebarMini]: miniActive,\r\n      [classes.mainPanelWithPerfectScrollbar]: navigator.platform.indexOf('Win') > -1,\r\n    })\r\n\r\n  useEffect(() => {\r\n    if (navigator.platform.indexOf('Win') > -1) {\r\n      ps = new PerfectScrollbar(mainPanel.current, {\r\n        suppressScrollX: true,\r\n        suppressScrollY: false,\r\n      })\r\n      document.body.style.overflow = 'hidden'\r\n    }\r\n    window.addEventListener('resize', resizeFunction)\r\n\r\n    // Specify how to clean up after this effect:\r\n    return function cleanup() {\r\n      if (navigator.platform.indexOf('Win') > -1) {\r\n        ps.destroy()\r\n      }\r\n      window.removeEventListener('resize', resizeFunction)\r\n    }\r\n  })\r\n  const handleDrawerToggle = () => {\r\n    setMobileOpen(!mobileOpen)\r\n  }\r\n  const getActiveRoute = (routes) => {\r\n    let activeRoute = 'Agencia de Actividades'\r\n    for (let i = 0; i < routes.length; i++) {\r\n      if (routes[i].collapse) {\r\n        let collapseActiveRoute = getActiveRoute(routes[i].views)\r\n        if (collapseActiveRoute !== activeRoute) {\r\n          return collapseActiveRoute\r\n        }\r\n      } else {\r\n        if (window.location.href.indexOf(routes[i].layout + routes[i].path) !== -1) {\r\n          return routes[i].name\r\n        }\r\n      }\r\n    }\r\n    return activeRoute\r\n  }\r\n  const getRoutes = (routes) => {\r\n    let filteredRoutes = getRoutesByRole(routes)\r\n    return filteredRoutes.map((prop, key) => {\r\n      if (prop.collapse) {\r\n        return getRoutes(prop.views)\r\n      }\r\n      if (prop.layout === '/admin') {\r\n        return <Route path={prop.layout + prop.path} component={prop.component} key={key} />\r\n      } else {\r\n        return null\r\n      }\r\n    })\r\n  }\r\n  const sidebarMinimize = () => {\r\n    setMiniActive(!miniActive)\r\n  }\r\n  const resizeFunction = () => {\r\n    if (window.innerWidth >= 960) {\r\n      setMobileOpen(false)\r\n    }\r\n  }\r\n\r\n  const getRoutesByRole = (routes) => {\r\n    return routes\r\n  }\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      <Sidebar\r\n        routes={getRoutesByRole(routes)}\r\n        logo={logo}\r\n        handleDrawerToggle={handleDrawerToggle}\r\n        open={mobileOpen}\r\n        color='white'\r\n        bgColor='white'\r\n        miniActive={miniActive}\r\n        {...rest}\r\n      />\r\n      <div className={mainPanelClasses} ref={mainPanel}>\r\n        <AdminNavbar\r\n          sidebarMinimize={sidebarMinimize.bind(this)}\r\n          miniActive={miniActive}\r\n          brandText={getActiveRoute(routes)}\r\n          handleDrawerToggle={handleDrawerToggle}\r\n          {...rest}\r\n        />\r\n\r\n        <div className={classes.content}>\r\n          <div className={classes.container}>\r\n            <Switch>\r\n              {getRoutes(routes)}\r\n              <Redirect from='/admin' to='/admin/user-page' />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n        <Footer fluid />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DashboardLayout\r\n"],"mappings":"0jBAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,SAAS,KAAQ,OAAO,CACtD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,MAAO,CAAAC,EAAE,KAAM,YAAY,CAC3B,OAASC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CAC1D,MAAO,CAAAC,gBAAgB,KAAM,mBAAmB,CAChD,MAAO,6CAA6C,CACpD,OAASC,UAAU,KAAQ,mBAAmB,CAC9C,MAAO,CAAAC,WAAW,KAAM,gCAAgC,CACxD,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,OAAO,KAAM,4BAA4B,CAChD,MAAO,CAAAC,MAAM,KAAM,eAAe,CAClC,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,OAASC,YAAY,KAAQ,2BAA2B,CACxD,MAAO,CAAAC,MAAM,KAAM,qBAAqB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExC,GAAI,CAAAC,EAAE,CAEN,GAAM,CAAAC,SAAS,CAAGb,UAAU,CAACO,MAAM,CAAC,CAEpC,GAAM,CAAAO,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAAC,IAAA,CAAoB,KAAAC,GAAA,IAAX,CAAAC,IAAI,CAAAC,MAAA,CAAAC,MAAA,KAAAC,yBAAA,CAAAL,IAAA,EAAAA,IAAA,GAChC,GAAM,CAAAM,OAAO,CAAGR,SAAS,EAAE,CAC3B,GAAM,CAAAS,OAAO,CAAG5B,UAAU,EAAE,CAC5B,GAAM,CAAA6B,SAAS,cAAGjC,SAAS,EAAE,CAC7B,GAAM,CAAAkC,QAAQ,CAAG/B,WAAW,EAAE,CAE9B,IAAAgC,SAAA,CAAoCpC,QAAQ,CAAC,KAAK,CAAC,CAAAqC,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5CG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAChC,IAAAI,UAAA,CAAoCzC,QAAQ,CAAC,KAAK,CAAC,CAAA0C,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA5CE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAChC,IAAAG,UAAA,CAAwB7C,QAAQ,CAAC8C,OAAO,CAAC,+CAA+C,CAAC,CAACC,OAAO,CAAC,CAAAC,UAAA,CAAAV,cAAA,CAAAO,UAAA,IAA3FI,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IAEpB,IAAAG,YAAA,CAAqBhD,WAAW,CAAC,SAACiD,KAAK,QAAK,CAAAA,KAAK,CAACC,SAAS,GAAC,CAApDC,QAAQ,CAAAH,YAAA,CAARG,QAAQ,CAEhBpD,SAAS,CAAC,UAAM,CACd,GAAI,CAACoD,QAAQ,CAAE,CACbrB,OAAO,CAACsB,IAAI,CAAC,aAAa,CAAC,CAC7B,CACF,CAAC,CAAE,CAACD,QAAQ,CAAErB,OAAO,CAAC,CAAC,CAEvB/B,SAAS,CAAC,UAAM,CACd;AAAA,CACD,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAsD,gBAAgB,CACpBxB,OAAO,CAACE,SAAS,CACjB,GAAG,CACH5B,EAAE,EAAAqB,GAAA,IAAA8B,eAAA,CAAA9B,GAAA,CACCK,OAAO,CAAC0B,oBAAoB,CAAGf,UAAU,EAAAc,eAAA,CAAA9B,GAAA,CACzCK,OAAO,CAAC2B,6BAA6B,CAAGC,SAAS,CAACC,QAAQ,CAACC,OAAO,CAAC,KAAK,CAAC,CAAG,CAAC,CAAC,EAAAnC,GAAA,EAC/E,CAEJzB,SAAS,CAAC,UAAM,CACd,GAAI0D,SAAS,CAACC,QAAQ,CAACC,OAAO,CAAC,KAAK,CAAC,CAAG,CAAC,CAAC,CAAE,CAC1CvC,EAAE,CAAG,GAAI,CAAAb,gBAAgB,CAACwB,SAAS,CAAC6B,OAAO,CAAE,CAC3CC,eAAe,CAAE,IAAI,CACrBC,eAAe,CAAE,KACnB,CAAC,CAAC,CACFC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAAG,QAAQ,CACzC,CACAC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,CAAEC,cAAc,CAAC,CAEjD;AACA,MAAO,SAAS,CAAAC,OAAOA,CAAA,CAAG,CACxB,GAAIb,SAAS,CAACC,QAAQ,CAACC,OAAO,CAAC,KAAK,CAAC,CAAG,CAAC,CAAC,CAAE,CAC1CvC,EAAE,CAACmD,OAAO,EAAE,CACd,CACAJ,MAAM,CAACK,mBAAmB,CAAC,QAAQ,CAAEH,cAAc,CAAC,CACtD,CAAC,CACH,CAAC,CAAC,CACF,GAAM,CAAAI,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAA,CAAS,CAC/BpC,aAAa,CAAC,CAACD,UAAU,CAAC,CAC5B,CAAC,CACD,GAAM,CAAAsC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAI9D,MAAM,CAAK,CACjC,GAAI,CAAA+D,WAAW,CAAG,wBAAwB,CAC1C,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGhE,MAAM,CAACiE,MAAM,CAAED,CAAC,EAAE,CAAE,CACtC,GAAIhE,MAAM,CAACgE,CAAC,CAAC,CAACE,QAAQ,CAAE,CACtB,GAAI,CAAAC,mBAAmB,CAAGL,cAAc,CAAC9D,MAAM,CAACgE,CAAC,CAAC,CAACI,KAAK,CAAC,CACzD,GAAID,mBAAmB,GAAKJ,WAAW,CAAE,CACvC,MAAO,CAAAI,mBAAmB,CAC5B,CACF,CAAC,IAAM,CACL,GAAIZ,MAAM,CAACc,QAAQ,CAACC,IAAI,CAACvB,OAAO,CAAC/C,MAAM,CAACgE,CAAC,CAAC,CAACO,MAAM,CAAGvE,MAAM,CAACgE,CAAC,CAAC,CAACQ,IAAI,CAAC,GAAK,CAAC,CAAC,CAAE,CAC1E,MAAO,CAAAxE,MAAM,CAACgE,CAAC,CAAC,CAACS,IAAI,CACvB,CACF,CACF,CACA,MAAO,CAAAV,WAAW,CACpB,CAAC,CACD,GAAM,CAAAW,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAI1E,MAAM,CAAK,CAC5B,GAAI,CAAA2E,cAAc,CAAGC,eAAe,CAAC5E,MAAM,CAAC,CAC5C,MAAO,CAAA2E,cAAc,CAACE,GAAG,CAAC,SAACC,IAAI,CAAEC,GAAG,CAAK,CACvC,GAAID,IAAI,CAACZ,QAAQ,CAAE,CACjB,MAAO,CAAAQ,SAAS,CAACI,IAAI,CAACV,KAAK,CAAC,CAC9B,CACA,GAAIU,IAAI,CAACP,MAAM,GAAK,QAAQ,CAAE,CAC5B,mBAAOlE,IAAA,CAACZ,KAAK,EAAC+E,IAAI,CAAEM,IAAI,CAACP,MAAM,CAAGO,IAAI,CAACN,IAAK,CAACQ,SAAS,CAAEF,IAAI,CAACE,SAAU,EAAMD,GAAG,CAAI,CACtF,CAAC,IAAM,CACL,MAAO,KAAI,CACb,CACF,CAAC,CAAC,CACJ,CAAC,CACD,GAAM,CAAAE,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC5BpD,aAAa,CAAC,CAACD,UAAU,CAAC,CAC5B,CAAC,CACD,GAAM,CAAA6B,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAC3B,GAAIF,MAAM,CAAC2B,UAAU,EAAI,GAAG,CAAE,CAC5BzD,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,GAAM,CAAAmD,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAI5E,MAAM,CAAK,CAClC,MAAO,CAAAA,MAAM,CACf,CAAC,CACD,mBACEO,KAAA,QAAK4E,SAAS,CAAElE,OAAO,CAACmE,OAAQ,CAAAC,QAAA,eAC9BhF,IAAA,CAACN,OAAO,CAAAuF,aAAA,EACNtF,MAAM,CAAE4E,eAAe,CAAC5E,MAAM,CAAE,CAChCkC,IAAI,CAAEA,IAAK,CACX2B,kBAAkB,CAAEA,kBAAmB,CACvC0B,IAAI,CAAE/D,UAAW,CACjBgE,KAAK,CAAC,OAAO,CACbC,OAAO,CAAC,OAAO,CACf7D,UAAU,CAAEA,UAAW,EACnBf,IAAI,EACR,cACFN,KAAA,QAAK4E,SAAS,CAAE1C,gBAAiB,CAACiD,GAAG,CAAEvE,SAAU,CAAAkE,QAAA,eAC/ChF,IAAA,CAACR,WAAW,CAAAyF,aAAA,EACVL,eAAe,CAAEA,eAAe,CAACU,IAAI,CAACC,KAAI,CAAE,CAC5ChE,UAAU,CAAEA,UAAW,CACvBiE,SAAS,CAAE/B,cAAc,CAAC9D,MAAM,CAAE,CAClC6D,kBAAkB,CAAEA,kBAAmB,EACnChD,IAAI,EACR,cAEFR,IAAA,QAAK8E,SAAS,CAAElE,OAAO,CAAC6E,OAAQ,CAAAT,QAAA,cAC9BhF,IAAA,QAAK8E,SAAS,CAAElE,OAAO,CAAC8E,SAAU,CAAAV,QAAA,cAChC9E,KAAA,CAACf,MAAM,EAAA6F,QAAA,EACJX,SAAS,CAAC1E,MAAM,CAAC,cAClBK,IAAA,CAACX,QAAQ,EAACsG,IAAI,CAAC,QAAQ,CAACC,EAAE,CAAC,kBAAkB,EAAG,GACzC,EACL,EACF,cACN5F,IAAA,CAACP,MAAM,EAACoG,KAAK,OAAG,GACZ,GACF,CAEV,CAAC,CAED,cAAe,CAAAxF,eAAe"},"metadata":{},"sourceType":"module"}