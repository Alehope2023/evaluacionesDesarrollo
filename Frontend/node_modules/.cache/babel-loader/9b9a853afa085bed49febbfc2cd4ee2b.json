{"ast":null,"code":"import _objectSpread from\"C:/trabajo/Alehope/actividadesPreBuild/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{FormControl,Select as Selectable,InputLabel,makeStyles,MenuItem}from'@material-ui/core';import GridItem from'components/Grid/GridItem';import{TASK_LIST_RESET}from'redux/constants/taskConstants';import{getTasks}from'redux/actions/taskActions';import styles from'../../styles/tasksSelectStyles';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(styles);var TasksSelect=function TasksSelect(_ref){var activityInfo=_ref.activityInfo,setActivityInfo=_ref.setActivityInfo,task=_ref.task,setTask=_ref.setTask;var dispatch=useDispatch();var classes=useStyles();var _useSelector=useSelector(function(state){return state.taskList;}),successTaskList=_useSelector.successTaskList,loadingTaskList=_useSelector.loadingTaskList,tasksData=_useSelector.tasksData;useEffect(function(){if(!successTaskList){dispatch(getTasks());}else{//Se ha cargado.\nif(task){setTask(tasksData.filter(function(taskData){return taskData.id_tarea===task;})[0]);}}},[successTaskList]);useEffect(function(){if(tasksData&&task){setActivityInfo(_objectSpread(_objectSpread({},activityInfo),{},{tarea:tasksData.filter(function(taskData){return taskData.id_tarea===task;})}));}},[task]);useEffect(function(){return function(){return dispatch({type:TASK_LIST_RESET});};},[dispatch]);return/*#__PURE__*/_jsx(GridItem,{xs:12,children:loadingTaskList?/*#__PURE__*/_jsx(_Fragment,{children:\"Cargando\"}):(tasksData===null||tasksData===void 0?void 0:tasksData.length)>0&&/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"tasks\",children:\"Tareas\"}),/*#__PURE__*/_jsxs(Selectable,{MenuProps:{className:classes.selectMenu},className:classes.select,value:task,onChange:function onChange(e){return setTask(tasksData.filter(function(taskData){return taskData.id_tarea===e.target.value;})[0]);},inputProps:{name:'tasks',id:'tasks'},children:[/*#__PURE__*/_jsx(MenuItem,{disabled:true,classes:{root:classes.selectMenuItem},children:\"Tareas\"}),tasksData.map(function(task,index){return/*#__PURE__*/_jsx(MenuItem,{classes:{root:classes.selectMenuItem,selected:classes.selectMenuItemSelected},value:task.id_tarea,children:task.descripcion_tarea},index);})]})]})});};export default TasksSelect;","map":{"version":3,"names":["useEffect","useDispatch","useSelector","FormControl","Select","Selectable","InputLabel","makeStyles","MenuItem","GridItem","TASK_LIST_RESET","getTasks","styles","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","useStyles","TasksSelect","_ref","activityInfo","setActivityInfo","task","setTask","dispatch","classes","_useSelector","state","taskList","successTaskList","loadingTaskList","tasksData","filter","taskData","id_tarea","_objectSpread","tarea","type","xs","children","length","fullWidth","htmlFor","MenuProps","className","selectMenu","select","value","onChange","e","target","inputProps","name","id","disabled","root","selectMenuItem","map","index","selected","selectMenuItemSelected","descripcion_tarea"],"sources":["C:/trabajo/Alehope/actividadesPreBuild/Frontend/src/screens/control-panel/ActivitiesListScreen/ActivitiesRegisterScreen/components/TasksSelect.js"],"sourcesContent":["import { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {  FormControl, Select as Selectable, InputLabel, makeStyles, MenuItem } from '@material-ui/core'\r\nimport GridItem from 'components/Grid/GridItem'\r\nimport { TASK_LIST_RESET } from 'redux/constants/taskConstants'\r\nimport { getTasks } from 'redux/actions/taskActions'\r\nimport styles from '../../styles/tasksSelectStyles'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst TasksSelect = ({ activityInfo, setActivityInfo, task, setTask }) => {\r\n  const dispatch = useDispatch()\r\n  const classes = useStyles()\r\n\r\n  const { successTaskList, loadingTaskList, tasksData } = useSelector((state) => state.taskList)\r\n\r\n  useEffect(() => {\r\n    if (!successTaskList) {\r\n      dispatch(getTasks())\r\n    }\r\n    else {\r\n      //Se ha cargado.\r\n      if (task) {\r\n        setTask(tasksData.filter((taskData) => taskData.id_tarea === task)[0])\r\n      }\r\n    }\r\n  }, [successTaskList])\r\n\r\n  useEffect(() => {\r\n    if (tasksData && task) {\r\n      setActivityInfo({\r\n        ...activityInfo,\r\n        tarea: tasksData.filter((taskData) => taskData.id_tarea === task),\r\n      })\r\n    }\r\n  }, [task])\r\n\r\n  useEffect(() => {\r\n    return () => dispatch({ type: TASK_LIST_RESET })\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <GridItem xs={12}>\r\n      {loadingTaskList ? (\r\n        <>Cargando</>\r\n      ) : (\r\n        tasksData?.length > 0 && (\r\n          <FormControl fullWidth>\r\n            <InputLabel htmlFor='tasks'>Tareas</InputLabel>\r\n            <Selectable\r\n              MenuProps={{\r\n                className: classes.selectMenu,\r\n              }}\r\n              className={classes.select}\r\n              value={task}\r\n              onChange={(e) => setTask(tasksData.filter((taskData) => taskData.id_tarea === e.target.value)[0])}\r\n              inputProps={{\r\n                name: 'tasks',\r\n                id: 'tasks',\r\n              }}\r\n            >\r\n              <MenuItem\r\n                disabled\r\n                classes={{\r\n                  root: classes.selectMenuItem,\r\n                }}\r\n              >\r\n                Tareas\r\n              </MenuItem>\r\n              {tasksData.map((task, index) => (\r\n                <MenuItem\r\n                  classes={{ root: classes.selectMenuItem, selected: classes.selectMenuItemSelected }}\r\n                  value={task.id_tarea}\r\n                  key={index}\r\n                >\r\n                  {task.descripcion_tarea}\r\n                </MenuItem>\r\n              ))}\r\n            </Selectable>\r\n          </FormControl>\r\n        )\r\n      )}\r\n    </GridItem>\r\n  )\r\n}\r\n\r\nexport default TasksSelect\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}