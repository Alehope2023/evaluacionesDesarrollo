{"ast":null,"code":"import _slicedToArray from\"C:/trabajo/Alehope/actividadesPreBuild/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{makeStyles}from'@material-ui/core';import GridItem from'components/Grid/GridItem';import MultiSelectJobPosition from'components/MultiSelectProfiles/MultiSelectProfiles';import{PROFILE_LIST_RESET}from'redux/constants/profileConstants';import{getProfiles,getProfilesByPosition}from'redux/actions/profileActions';import styles from'../styles/multiSelectStyles';import{jsx as _jsx}from\"react/jsx-runtime\";var useStyles=makeStyles(styles);var ProfileMultiSelect=function ProfileMultiSelect(_ref){var profilesData=_ref.profilesData,setProfilesData=_ref.setProfilesData,_ref$byPosition=_ref.byPosition,byPosition=_ref$byPosition===void 0?false:_ref$byPosition;var classes=useStyles();var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useSelector=useSelector(function(state){return state.profileList;}),successProfileList=_useSelector.successProfileList,loadingProfileList=_useSelector.loadingProfileList,profiles=_useSelector.profiles,errorProfileList=_useSelector.errorProfileList;var _useSelector2=useSelector(function(state){return state.profileByPositionList;}),successProfileByPositionList=_useSelector2.successProfileByPositionList,loadingProfileByPositionList=_useSelector2.loadingProfileByPositionList,profilesByPosition=_useSelector2.profilesByPosition,errorProfileByPositionList=_useSelector2.errorProfileByPositionList;useEffect(function(){return function(){return dispatch({type:PROFILE_LIST_RESET});};},[dispatch]);useEffect(function(){if(byPosition)return;if(!successProfileList){dispatch(getProfiles());}else{var filteredProfiles=profiles.filter(function(p){return p.activo==='SI';});setData(filteredProfiles);}},[successProfileList]);useEffect(function(){if(!byPosition)return;if(!successProfileByPositionList){dispatch(getProfilesByPosition());}else{var filteredProfiles=profilesByPosition.filter(function(p){return p.activo==='SI';});setData(filteredProfiles);}},[successProfileByPositionList]);var handleChangeMultiData=function handleChangeMultiData(event){var value=event.target.value;if(profilesData.map(function(profile){return profile.id_perfil;}).indexOf(value[value.length-1].id_perfil)===-1){setProfilesData(value);}else{setProfilesData(profilesData.filter(function(profile){var _value;return profile.id_perfil!==((_value=value[value.length-1])===null||_value===void 0?void 0:_value.id_perfil);}));}};return/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(MultiSelectJobPosition,{label:'Perfiles',data:data,multiData:profilesData,handleChangeMultiData:handleChangeMultiData})});};export default ProfileMultiSelect;","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","makeStyles","GridItem","MultiSelectJobPosition","PROFILE_LIST_RESET","getProfiles","getProfilesByPosition","styles","jsx","_jsx","useStyles","ProfileMultiSelect","_ref","profilesData","setProfilesData","_ref$byPosition","byPosition","classes","dispatch","_useState","_useState2","_slicedToArray","data","setData","_useSelector","state","profileList","successProfileList","loadingProfileList","profiles","errorProfileList","_useSelector2","profileByPositionList","successProfileByPositionList","loadingProfileByPositionList","profilesByPosition","errorProfileByPositionList","type","filteredProfiles","filter","p","activo","handleChangeMultiData","event","value","target","map","profile","id_perfil","indexOf","length","_value","xs","children","label","multiData"],"sources":["C:/trabajo/Alehope/actividadesPreBuild/Frontend/src/screens/control-panel/DashboardScreen/components/ProfileMultiSelect.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core'\r\nimport GridItem from 'components/Grid/GridItem'\r\nimport MultiSelectJobPosition from 'components/MultiSelectProfiles/MultiSelectProfiles'\r\nimport { PROFILE_LIST_RESET } from 'redux/constants/profileConstants'\r\nimport { getProfiles, getProfilesByPosition } from 'redux/actions/profileActions'\r\nimport styles from '../styles/multiSelectStyles'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst ProfileMultiSelect = ({ profilesData, setProfilesData, byPosition = false }) => {\r\n   const classes = useStyles()\r\n   const dispatch = useDispatch()\r\n   const [data, setData] = useState([])\r\n\r\n   const { successProfileList, loadingProfileList, profiles, errorProfileList } = useSelector(\r\n      (state) => state.profileList\r\n   )\r\n\r\n   const { successProfileByPositionList, loadingProfileByPositionList, profilesByPosition, errorProfileByPositionList } = useSelector(\r\n      (state) => state.profileByPositionList\r\n   )\r\n\r\n   useEffect(() => {\r\n      return () => dispatch({ type: PROFILE_LIST_RESET })\r\n   }, [dispatch])\r\n\r\n   useEffect(() => {\r\n      if ( byPosition ) return\r\n\r\n      if (!successProfileList) {\r\n         dispatch(getProfiles())\r\n      } else {\r\n         const filteredProfiles = profiles.filter((p) => p.activo === 'SI')\r\n         setData(filteredProfiles)\r\n      }\r\n   }, [successProfileList])\r\n\r\n   useEffect(() => {\r\n      if ( !byPosition ) return\r\n\r\n      if (!successProfileByPositionList) {\r\n         dispatch(getProfilesByPosition())\r\n      } else {\r\n         const filteredProfiles = profilesByPosition.filter((p) => p.activo === 'SI')\r\n         setData(filteredProfiles)\r\n      }\r\n   }, [successProfileByPositionList])\r\n\r\n   const handleChangeMultiData = (event) => {\r\n      const {\r\n         target: { value },\r\n      } = event\r\n      if (profilesData.map((profile) => profile.id_perfil).indexOf(value[value.length - 1].id_perfil) === -1) {\r\n         setProfilesData(value)\r\n      } else {\r\n         setProfilesData(profilesData.filter((profile) => profile.id_perfil !== value[value.length - 1]?.id_perfil))\r\n      }\r\n   }\r\n\r\n\r\n   return (\r\n      <GridItem xs={12}>\r\n         <MultiSelectJobPosition\r\n         label={'Perfiles'}\r\n         data={data}\r\n         multiData={profilesData}\r\n         handleChangeMultiData={handleChangeMultiData}\r\n         />\r\n      </GridItem>\r\n   )\r\n}\r\n\r\nexport default ProfileMultiSelect\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}