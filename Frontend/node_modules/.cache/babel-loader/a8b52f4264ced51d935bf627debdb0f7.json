{"ast":null,"code":"import _slicedToArray from\"C:/trabajo/Alehope/actividadesPreBuild/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{makeStyles}from'@material-ui/core';import GridItem from'components/Grid/GridItem';import MultiSelectDepartments from'components/MultiSelectDepartments/MultiSelectDepartments';import{DEPARTAMENT_LIST_RESET}from'redux/constants/departamentConstants';import{getDepartaments,getDepartamentsRelated}from'redux/actions/departamentActions';import styles from'../styles/multiSelectStyles';import{jsx as _jsx}from\"react/jsx-runtime\";var useStyles=makeStyles(styles);var DepartamentoMultiSelect=function DepartamentoMultiSelect(_ref){var departamentosData=_ref.departamentosData,setDepartamentosData=_ref.setDepartamentosData,_ref$relatedPositions=_ref.relatedPositions,relatedPositions=_ref$relatedPositions===void 0?false:_ref$relatedPositions;var classes=useStyles();var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useSelector=useSelector(function(state){return state.departamentList;}),successDepartamentList=_useSelector.successDepartamentList,departaments=_useSelector.departaments;var _useSelector2=useSelector(function(state){return state.departamentRelatedList;}),successDepartamentRelatedList=_useSelector2.successDepartamentRelatedList,departamentsRelated=_useSelector2.departamentsRelated;useEffect(function(){return function(){return dispatch({type:DEPARTAMENT_LIST_RESET});};},[dispatch]);useEffect(function(){if(relatedPositions)return;if(!successDepartamentList){dispatch(getDepartaments());}else{var filteredServices=departaments.filter(function(p){return p.codigo_departamento!=='';});setData(filteredServices);}},[successDepartamentList]);useEffect(function(){if(!relatedPositions)return;if(!successDepartamentRelatedList){dispatch(getDepartamentsRelated());}else{var filteredServices=departamentsRelated.filter(function(p){return p.codigo_departamento!=='';});setData(filteredServices);}},[successDepartamentRelatedList]);var handleChangeMultiData=function handleChangeMultiData(event){var value=event.target.value;if(departamentosData.map(function(departamento){return departamento.id_departamento;}).indexOf(value[value.length-1].id_departamento)===-1){setDepartamentosData(value);}else{setDepartamentosData(departamentosData.filter(function(departamento){var _value;return departamento.id_departamento!==((_value=value[value.length-1])===null||_value===void 0?void 0:_value.id_departamento);}));}};return/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(MultiSelectDepartments,{label:'Departamentos',data:data,multiData:departamentosData,handleChangeMultiData:handleChangeMultiData})});};export default DepartamentoMultiSelect;","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","makeStyles","GridItem","MultiSelectDepartments","DEPARTAMENT_LIST_RESET","getDepartaments","getDepartamentsRelated","styles","jsx","_jsx","useStyles","DepartamentoMultiSelect","_ref","departamentosData","setDepartamentosData","_ref$relatedPositions","relatedPositions","classes","dispatch","_useState","_useState2","_slicedToArray","data","setData","_useSelector","state","departamentList","successDepartamentList","departaments","_useSelector2","departamentRelatedList","successDepartamentRelatedList","departamentsRelated","type","filteredServices","filter","p","codigo_departamento","handleChangeMultiData","event","value","target","map","departamento","id_departamento","indexOf","length","_value","xs","children","label","multiData"],"sources":["C:/trabajo/Alehope/actividadesPreBuild/Frontend/src/screens/control-panel/DashboardScreen/components/DepartamentoMultiSelect.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core'\r\nimport GridItem from 'components/Grid/GridItem'\r\nimport MultiSelectDepartments from 'components/MultiSelectDepartments/MultiSelectDepartments'\r\nimport { DEPARTAMENT_LIST_RESET } from 'redux/constants/departamentConstants'\r\nimport { getDepartaments, getDepartamentsRelated } from 'redux/actions/departamentActions'\r\nimport styles from '../styles/multiSelectStyles'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst DepartamentoMultiSelect = ({ departamentosData, setDepartamentosData, relatedPositions = false }) => {\r\n   const classes = useStyles()\r\n   const dispatch = useDispatch()\r\n   const [data, setData] = useState([])\r\n\r\n   const { successDepartamentList, departaments } = useSelector(\r\n      (state) => state.departamentList\r\n   )\r\n\r\n   const { successDepartamentRelatedList, departamentsRelated } = useSelector(\r\n      (state) => state.departamentRelatedList\r\n   )\r\n\r\n   useEffect(() => {\r\n      return () => dispatch({ type: DEPARTAMENT_LIST_RESET })\r\n   }, [dispatch])\r\n\r\n   useEffect(() => {\r\n      if ( relatedPositions ) return\r\n\r\n      if (!successDepartamentList) {\r\n         dispatch(getDepartaments())\r\n      } else {\r\n         const filteredServices = departaments.filter((p) => p.codigo_departamento !== '')\r\n         setData(filteredServices)\r\n      }\r\n   }, [successDepartamentList])\r\n\r\n   useEffect(() => {\r\n      if ( !relatedPositions ) return\r\n\r\n      if (!successDepartamentRelatedList) {\r\n         dispatch(getDepartamentsRelated())\r\n      } else {\r\n         const filteredServices = departamentsRelated.filter((p) => p.codigo_departamento !== '')\r\n         setData(filteredServices)\r\n      }\r\n   }, [successDepartamentRelatedList])\r\n\r\n   const handleChangeMultiData = (event) => {\r\n      const {\r\n         target: { value },\r\n      } = event\r\n      if (departamentosData.map((departamento) => departamento.id_departamento).indexOf(value[value.length - 1].id_departamento) === -1) {\r\n         setDepartamentosData(value)\r\n      } else {\r\n         setDepartamentosData(departamentosData.filter((departamento) => departamento.id_departamento !== value[value.length - 1]?.id_departamento))\r\n      }\r\n   }\r\n\r\n   return (\r\n      <GridItem xs={12}>\r\n         <MultiSelectDepartments\r\n         label={'Departamentos'}\r\n         data={data}\r\n         multiData={departamentosData}\r\n         handleChangeMultiData={handleChangeMultiData}\r\n         />\r\n      </GridItem>\r\n   )\r\n}\r\n\r\nexport default DepartamentoMultiSelect\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}