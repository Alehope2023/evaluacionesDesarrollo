{"ast":null,"code":"import _slicedToArray from\"C:/trabajo/Alehope/actividadesPreBuild/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{makeStyles}from'@material-ui/core';import GridItem from'components/Grid/GridItem';import MultiSelectSubdirections from'components/MultiSelectSubdirections/MultiSelectSubdirections';import{SUBDIRECTION_LIST_RESET}from'redux/constants/subdirectionConstants';import{getSubdirections,getSubdirectionsRelated}from'redux/actions/subdirectionActions';import styles from'../styles/multiSelectStyles';import{jsx as _jsx}from\"react/jsx-runtime\";var useStyles=makeStyles(styles);var SubdireccionMultiSelect=function SubdireccionMultiSelect(_ref){var subdireccionesData=_ref.subdireccionesData,setSubdireccionesData=_ref.setSubdireccionesData,_ref$relatedPositions=_ref.relatedPositions,relatedPositions=_ref$relatedPositions===void 0?false:_ref$relatedPositions;var classes=useStyles();var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useSelector=useSelector(function(state){return state.subdirectionList;}),successSubdirectionList=_useSelector.successSubdirectionList,loadingSubdirectionList=_useSelector.loadingSubdirectionList,subdirections=_useSelector.subdirections,_useSelector$errorSub=_useSelector.errorSubdirectionList,errorSubdirectionList=_useSelector$errorSub===void 0?false:_useSelector$errorSub;var _useSelector2=useSelector(function(state){return state.subdirectionRelatedList;}),successSubdirectionRelatedList=_useSelector2.successSubdirectionRelatedList,loadingSubdirectionRelatedList=_useSelector2.loadingSubdirectionRelatedList,subdirectionsRelated=_useSelector2.subdirectionsRelated,errorSubdirectionRelatedList=_useSelector2.errorSubdirectionRelatedList;useEffect(function(){return function(){return dispatch({type:SUBDIRECTION_LIST_RESET});};},[dispatch]);useEffect(function(){if(relatedPositions)return;if(!successSubdirectionList){dispatch(getSubdirections());}else{var filteredProfiles=subdirections.filter(function(p){return p.codigo_subdireccion!=='';});setData(filteredProfiles);}},[successSubdirectionList]);useEffect(function(){if(!relatedPositions)return;if(!successSubdirectionRelatedList){dispatch(getSubdirectionsRelated({relatedPositions:relatedPositions}));}else{var filteredProfiles=subdirectionsRelated.filter(function(p){return p.codigo_subdireccion!=='';});setData(filteredProfiles);}},[successSubdirectionRelatedList]);var handleChangeMultiData=function handleChangeMultiData(event){var value=event.target.value;if(subdireccionesData.map(function(subdireccion){return subdireccion.id_subdireccion;}).indexOf(value[value.length-1].id_subdireccion)===-1){setSubdireccionesData(value);}else{setSubdireccionesData(subdireccionesData.filter(function(subdireccion){var _value;return subdireccion.id_subdireccion!==((_value=value[value.length-1])===null||_value===void 0?void 0:_value.id_subdireccion);}));}};return/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(MultiSelectSubdirections,{label:'Subdirecciones',data:data,multiData:subdireccionesData,handleChangeMultiData:handleChangeMultiData})});};export default SubdireccionMultiSelect;","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","makeStyles","GridItem","MultiSelectSubdirections","SUBDIRECTION_LIST_RESET","getSubdirections","getSubdirectionsRelated","styles","jsx","_jsx","useStyles","SubdireccionMultiSelect","_ref","subdireccionesData","setSubdireccionesData","_ref$relatedPositions","relatedPositions","classes","dispatch","_useState","_useState2","_slicedToArray","data","setData","_useSelector","state","subdirectionList","successSubdirectionList","loadingSubdirectionList","subdirections","_useSelector$errorSub","errorSubdirectionList","_useSelector2","subdirectionRelatedList","successSubdirectionRelatedList","loadingSubdirectionRelatedList","subdirectionsRelated","errorSubdirectionRelatedList","type","filteredProfiles","filter","p","codigo_subdireccion","handleChangeMultiData","event","value","target","map","subdireccion","id_subdireccion","indexOf","length","_value","xs","children","label","multiData"],"sources":["C:/trabajo/Alehope/actividadesPreBuild/Frontend/src/screens/control-panel/DashboardScreen/components/SubdireccionMultiSelect.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core'\r\nimport GridItem from 'components/Grid/GridItem'\r\nimport MultiSelectSubdirections from 'components/MultiSelectSubdirections/MultiSelectSubdirections'\r\nimport { SUBDIRECTION_LIST_RESET } from 'redux/constants/subdirectionConstants'\r\nimport { getSubdirections, getSubdirectionsRelated } from 'redux/actions/subdirectionActions'\r\nimport styles from '../styles/multiSelectStyles'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst SubdireccionMultiSelect = ({ subdireccionesData, setSubdireccionesData, relatedPositions = false }) => {\r\n   const classes = useStyles()\r\n   const dispatch = useDispatch()\r\n   const [data, setData] = useState([])\r\n\r\n   const { successSubdirectionList, loadingSubdirectionList, subdirections, errorSubdirectionList = false } = useSelector(\r\n      (state) => state.subdirectionList\r\n   )\r\n\r\n   const { successSubdirectionRelatedList, loadingSubdirectionRelatedList, subdirectionsRelated, errorSubdirectionRelatedList } = useSelector(\r\n      (state) => state.subdirectionRelatedList\r\n   )\r\n\r\n   useEffect(() => {\r\n      return () => dispatch({ type: SUBDIRECTION_LIST_RESET })\r\n   }, [dispatch])\r\n\r\n   useEffect(() => {\r\n      if ( relatedPositions ) return\r\n\r\n      if ( !successSubdirectionList ) {\r\n         dispatch(getSubdirections())\r\n      } else {\r\n         const filteredProfiles = subdirections.filter((p) => p.codigo_subdireccion !== '')\r\n         setData(filteredProfiles)\r\n      }\r\n   }, [successSubdirectionList])\r\n\r\n   useEffect(() => {\r\n      if ( !relatedPositions ) return\r\n\r\n      if ( !successSubdirectionRelatedList ) {\r\n         dispatch(getSubdirectionsRelated({ relatedPositions }))\r\n      } else {\r\n         const filteredProfiles = subdirectionsRelated.filter((p) => p.codigo_subdireccion !== '')\r\n         setData(filteredProfiles)\r\n      }\r\n   }, [successSubdirectionRelatedList])\r\n\r\n   const handleChangeMultiData = (event) => {\r\n      const {\r\n         target: { value },\r\n      } = event\r\n      if (subdireccionesData.map((subdireccion) => subdireccion.id_subdireccion).indexOf(value[value.length - 1].id_subdireccion) === -1) {\r\n         setSubdireccionesData(value)\r\n      } else {\r\n         setSubdireccionesData(subdireccionesData.filter((subdireccion) => subdireccion.id_subdireccion !== value[value.length - 1]?.id_subdireccion))\r\n      }\r\n   }\r\n\r\n   return (\r\n      <GridItem xs={12}>\r\n         <MultiSelectSubdirections\r\n         label={'Subdirecciones'}\r\n         data={data}\r\n         multiData={subdireccionesData}\r\n         handleChangeMultiData={handleChangeMultiData}\r\n         />\r\n      </GridItem>\r\n   )\r\n}\r\n\r\nexport default SubdireccionMultiSelect\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}