{"ast":null,"code":"import _slicedToArray from\"C:/trabajo/Alehope/actividadesPreBuild/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import roles from'config/roles/roles';import GridItem from'components/Grid/GridItem';import MultiSelectResponsibles from'components/MultiSelectJobPosition/MultiSelectResponsibles';import{USER_RESPONSIBLES_LIST_RESET}from'redux/constants/userConstants';import{getUsersResponsibles}from'redux/actions/userActions';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var ResponsibleMultiSelect=function ResponsibleMultiSelect(_ref){var responsibles=_ref.responsibles,setResponsibles=_ref.setResponsibles;var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useSelector=useSelector(function(state){return state.userListResponsibles;}),successUserResponsiblesList=_useSelector.successUserResponsiblesList,loadingUserResponsiblesList=_useSelector.loadingUserResponsiblesList,userResponsiblesListData=_useSelector.userResponsiblesListData;useEffect(function(){return function(){return dispatch({type:USER_RESPONSIBLES_LIST_RESET});};},[dispatch]);useEffect(function(){if(!successUserResponsiblesList){dispatch(getUsersResponsibles(roles.RESPONSABLE_ROLE));}else{var filteredProfiles=userResponsiblesListData.filter(function(p){return p.activo==='SI';});setData(filteredProfiles);}},[successUserResponsiblesList]);var handleChangeMultiData=function handleChangeMultiData(event){var value=event.target.value;if(responsibles.map(function(responsible){return responsible.id_puesto;}).indexOf(value[value.length-1].id_puesto)===-1){setResponsibles(value);}else{setResponsibles(responsibles.filter(function(responsible){var _value;return responsible.id_puesto!==((_value=value[value.length-1])===null||_value===void 0?void 0:_value.id_puesto);}));}};return/*#__PURE__*/_jsx(GridItem,{xs:12,children:loadingUserResponsiblesList?/*#__PURE__*/_jsx(_Fragment,{children:\"Cargando Responsables\"}):/*#__PURE__*/_jsx(MultiSelectResponsibles,{label:'Responsables',data:data,multiData:responsibles,handleChangeMultiData:handleChangeMultiData})});};export default ResponsibleMultiSelect;","map":{"version":3,"names":["useEffect","useState","useDispatch","useSelector","roles","GridItem","MultiSelectResponsibles","USER_RESPONSIBLES_LIST_RESET","getUsersResponsibles","Fragment","_Fragment","jsx","_jsx","ResponsibleMultiSelect","_ref","responsibles","setResponsibles","dispatch","_useState","_useState2","_slicedToArray","data","setData","_useSelector","state","userListResponsibles","successUserResponsiblesList","loadingUserResponsiblesList","userResponsiblesListData","type","RESPONSABLE_ROLE","filteredProfiles","filter","p","activo","handleChangeMultiData","event","value","target","map","responsible","id_puesto","indexOf","length","_value","xs","children","label","multiData"],"sources":["C:/trabajo/Alehope/actividadesPreBuild/Frontend/src/screens/control-panel/TeamWork/List/components/ResponsibleMultiSelect.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport roles from 'config/roles/roles'\r\nimport GridItem from 'components/Grid/GridItem'\r\nimport MultiSelectResponsibles from 'components/MultiSelectJobPosition/MultiSelectResponsibles'\r\nimport { USER_RESPONSIBLES_LIST_RESET } from 'redux/constants/userConstants'\r\nimport { getUsersResponsibles } from 'redux/actions/userActions'\r\n\r\nconst ResponsibleMultiSelect = ({ responsibles, setResponsibles }) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const [data, setData] = useState([])\r\n\r\n  const { successUserResponsiblesList, loadingUserResponsiblesList, userResponsiblesListData } = useSelector(\r\n    (state) => state.userListResponsibles\r\n  )\r\n\r\n  useEffect(() => {\r\n    return () => dispatch({ type: USER_RESPONSIBLES_LIST_RESET })\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    if (!successUserResponsiblesList) {\r\n      dispatch(getUsersResponsibles(roles.RESPONSABLE_ROLE))\r\n    } else {\r\n      const filteredProfiles = userResponsiblesListData.filter((p) => p.activo === 'SI')\r\n      setData(filteredProfiles)\r\n    }\r\n  }, [successUserResponsiblesList])\r\n\r\n  const handleChangeMultiData = (event) => {\r\n    const {\r\n      target: { value },\r\n    } = event\r\n    if (responsibles.map((responsible) => responsible.id_puesto).indexOf(value[value.length - 1].id_puesto) === -1) {\r\n      setResponsibles(value)\r\n    } else {\r\n      setResponsibles(\r\n        responsibles.filter((responsible) => responsible.id_puesto !== value[value.length - 1]?.id_puesto)\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <GridItem xs={12}>\r\n      {loadingUserResponsiblesList ? (\r\n        <>Cargando Responsables</>\r\n      ) : (\r\n        <MultiSelectResponsibles\r\n          label={'Responsables'}\r\n          data={data}\r\n          multiData={responsibles}\r\n          handleChangeMultiData={handleChangeMultiData}\r\n        />\r\n      )}\r\n    </GridItem>\r\n  )\r\n}\r\n\r\nexport default ResponsibleMultiSelect\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}